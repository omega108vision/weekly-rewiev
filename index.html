<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow">
    <title>–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–π –æ–±–∑–æ—Ä</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: #f5f5f5;
            color: #333;
            line-height: 1.5;
            padding: 16px;
            max-width: 600px;
            margin: 0 auto;
        }
        
        h1 {
            font-size: 1.5rem;
            margin-bottom: 8px;
            color: #1a1a1a;
        }
        
        .date-input {
            width: 100%;
            padding: 12px;
            font-size: 1rem;
            border: 1px solid #ddd;
            border-radius: 8px;
            margin-bottom: 24px;
            background: #fff;
        }
        
        .section {
            background: #fff;
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 16px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        .section-header {
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: #666;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .section-header .time {
            background: #e8e8e8;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 0.75rem;
        }
        
        .brain-dump {
            width: 100%;
            min-height: 120px;
            padding: 12px;
            font-size: 1rem;
            border: 1px solid #ddd;
            border-radius: 8px;
            resize: vertical;
            font-family: inherit;
            line-height: 1.6;
        }
        
        .area {
            border-bottom: 1px solid #eee;
            padding: 16px 0;
        }
        
        .area:last-child {
            border-bottom: none;
            padding-bottom: 0;
        }
        
        .area:first-of-type {
            padding-top: 0;
        }
        
        .area-name {
            font-weight: 600;
            font-size: 1.1rem;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .area-icon {
            font-size: 1.2rem;
        }
        
        .question {
            margin-bottom: 12px;
        }
        
        .question-label {
            font-size: 0.85rem;
            color: #666;
            margin-bottom: 4px;
        }
        
        .question-input {
            width: 100%;
            padding: 10px;
            font-size: 1rem;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-family: inherit;
        }
        
        textarea.question-input {
            min-height: 60px;
            resize: vertical;
        }
        
        .status-select {
            width: 100%;
            padding: 10px;
            font-size: 1rem;
            border: 1px solid #ddd;
            border-radius: 6px;
            background: #fff;
            font-family: inherit;
        }
        
        .calendar-check {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .check-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background: #f9f9f9;
            border-radius: 8px;
        }
        
        .check-item input[type="checkbox"] {
            width: 22px;
            height: 22px;
            cursor: pointer;
        }
        
        .check-item label {
            font-size: 1rem;
            cursor: pointer;
            flex: 1;
        }
        
        .finance-note {
            width: 100%;
            min-height: 80px;
            padding: 12px;
            font-size: 1rem;
            border: 1px solid #ddd;
            border-radius: 8px;
            resize: vertical;
            font-family: inherit;
        }
        
        .actions-summary {
            background: #e8f4e8;
        }
        
        .summary-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .summary-item {
            display: flex;
            gap: 8px;
            align-items: flex-start;
        }
        
        .summary-area {
            font-weight: 600;
            min-width: 100px;
            font-size: 0.9rem;
        }
        
        .summary-action {
            flex: 1;
            padding: 8px;
            font-size: 0.95rem;
            border: 1px solid #ccc;
            border-radius: 6px;
            font-family: inherit;
        }
        
        .btn-save {
            width: 100%;
            padding: 16px;
            font-size: 1.1rem;
            background: #2d5a27;
            color: #fff;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            margin-top: 8px;
            font-weight: 600;
        }
        
        .btn-save:active {
            background: #1e3d1a;
        }
        
        .btn-save:disabled {
            background: #999;
            cursor: not-allowed;
        }
        
        .btn-clear {
            width: 100%;
            padding: 12px;
            font-size: 1rem;
            background: #fff;
            color: #666;
            border: 1px solid #ddd;
            border-radius: 10px;
            cursor: pointer;
            margin-top: 8px;
        }
        
        .btn-history {
            width: 100%;
            padding: 12px;
            font-size: 1rem;
            background: #4a90d9;
            color: #fff;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            margin-top: 8px;
        }
        
        .saved-message {
            text-align: center;
            padding: 12px;
            background: #d4edda;
            color: #155724;
            border-radius: 8px;
            margin-top: 12px;
            display: none;
        }
        
        .error-message {
            text-align: center;
            padding: 12px;
            background: #f8d7da;
            color: #721c24;
            border-radius: 8px;
            margin-top: 12px;
            display: none;
        }
        
        .instructions {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 24px;
            padding: 12px;
            background: #fff;
            border-radius: 8px;
            border-left: 3px solid #2d5a27;
        }
        
        .sync-status {
            font-size: 0.8rem;
            color: #666;
            text-align: center;
            margin-top: 8px;
        }
        
        .sync-status.synced {
            color: #2d5a27;
        }
        
        .sync-status.error {
            color: #dc3545;
        }
        
        /* –ò—Å—Ç–æ—Ä–∏—è */
        .history-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            overflow-y: auto;
        }
        
        .history-content {
            background: #fff;
            margin: 20px auto;
            padding: 20px;
            max-width: 600px;
            border-radius: 12px;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .history-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }
        
        .history-close {
            font-size: 1.5rem;
            background: none;
            border: none;
            cursor: pointer;
            padding: 8px;
        }
        
        .history-item {
            padding: 16px;
            border: 1px solid #ddd;
            border-radius: 8px;
            margin-bottom: 12px;
            cursor: pointer;
        }
        
        .history-item:hover {
            background: #f5f5f5;
        }
        
        .history-date {
            font-weight: 600;
            margin-bottom: 8px;
        }
        
        .history-statuses {
            display: flex;
            gap: 4px;
            flex-wrap: wrap;
        }
        
        .status-dot {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
        }
        
        .status-dot.ok { background: #d4edda; }
        .status-dot.attention { background: #fff3cd; }
        .status-dot.problem { background: #f8d7da; }
        .status-dot.empty { background: #e9ecef; }
        
        .loading {
            text-align: center;
            padding: 40px;
            color: #666;
        }
    </style>
</head>
<body>
    <h1>üìã –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–π –æ–±–∑–æ—Ä</h1>
    
    <div class="instructions">
        –ó–∞–ø–æ–ª–Ω—è–π –∫–∞–∂–¥—ã–π –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫ —É—Ç—Ä–æ–º. –°–ª–µ–¥—É–π —Ä–∞–∑–¥–µ–ª–∞–º –ø–æ –ø–æ—Ä—è–¥–∫—É. –û–±—â–µ–µ –≤—Ä–µ–º—è: 60 –º–∏–Ω—É—Ç.
    </div>
    
    <input type="date" class="date-input" id="reviewDate">
    
    <div class="section">
        <div class="section-header">
            üß† –û—á–∏—Å—Ç–∫–∞ –≥–æ–ª–æ–≤—ã <span class="time">10 –º–∏–Ω</span>
        </div>
        <textarea class="brain-dump" id="brainDump" placeholder="–í—ã–ø–∏—à–∏ –≤—Å—ë, —á—Ç–æ –∫—Ä—É—Ç–∏—Ç—Å—è –≤ –≥–æ–ª–æ–≤–µ: –∑–∞–¥–∞—á–∏, —Ç—Ä–µ–≤–æ–≥–∏, –∏–¥–µ–∏, –Ω–µ–∑–∞–∫—Ä—ã—Ç—ã–µ –¥–µ–ª–∞..."></textarea>
    </div>
    
    <div class="section">
        <div class="section-header">
            üéØ –û–±–ª–∞—Å—Ç–∏ –∂–∏–∑–Ω–∏ <span class="time">35 –º–∏–Ω</span>
        </div>
        
        <div class="area">
            <div class="area-name"><span class="area-icon">üí™</span> –ó–¥–æ—Ä–æ–≤—å–µ</div>
            <div class="question">
                <div class="question-label">–ß—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ –∑–∞ –Ω–µ–¥–µ–ª—é?</div>
                <textarea class="question-input" id="area1-week"></textarea>
            </div>
            <div class="question">
                <div class="question-label">–°—Ç–∞—Ç—É—Å</div>
                <select class="status-select" id="area1-status">
                    <option value="">–í—ã–±–µ—Ä–∏...</option>
                    <option value="ok">‚úÖ –í—Å—ë –≤ –ø–æ—Ä—è–¥–∫–µ</option>
                    <option value="attention">‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è</option>
                    <option value="problem">üî¥ –ï—Å—Ç—å –ø—Ä–æ–±–ª–µ–º–∞</option>
                </select>
            </div>
            <div class="question">
                <div class="question-label">–°–ª–µ–¥—É—é—â–µ–µ –¥–µ–π—Å—Ç–≤–∏–µ</div>
                <input type="text" class="question-input" id="area1-action" placeholder="–û–¥–Ω–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ">
            </div>
        </div>
        
        <div class="area">
            <div class="area-name"><span class="area-icon">üë®‚Äçüë©‚Äçüë¶</span> –°–µ–º—å—è</div>
            <div class="question">
                <div class="question-label">–ß—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ –∑–∞ –Ω–µ–¥–µ–ª—é?</div>
                <textarea class="question-input" id="area2-week"></textarea>
            </div>
            <div class="question">
                <div class="question-label">–°—Ç–∞—Ç—É—Å</div>
                <select class="status-select" id="area2-status">
                    <option value="">–í—ã–±–µ—Ä–∏...</option>
                    <option value="ok">‚úÖ –í—Å—ë –≤ –ø–æ—Ä—è–¥–∫–µ</option>
                    <option value="attention">‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è</option>
                    <option value="problem">üî¥ –ï—Å—Ç—å –ø—Ä–æ–±–ª–µ–º–∞</option>
                </select>
            </div>
            <div class="question">
                <div class="question-label">–°–ª–µ–¥—É—é—â–µ–µ –¥–µ–π—Å—Ç–≤–∏–µ</div>
                <input type="text" class="question-input" id="area2-action" placeholder="–û–¥–Ω–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ">
            </div>
        </div>
        
        <div class="area">
            <div class="area-name"><span class="area-icon">üíº</span> –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–µ –ø—Ä–æ–µ–∫—Ç—ã</div>
            <div class="question">
                <div class="question-label">–ß—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ –∑–∞ –Ω–µ–¥–µ–ª—é?</div>
                <textarea class="question-input" id="area3-week"></textarea>
            </div>
            <div class="question">
                <div class="question-label">–°—Ç–∞—Ç—É—Å</div>
                <select class="status-select" id="area3-status">
                    <option value="">–í—ã–±–µ—Ä–∏...</option>
                    <option value="ok">‚úÖ –í—Å—ë –≤ –ø–æ—Ä—è–¥–∫–µ</option>
                    <option value="attention">‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è</option>
                    <option value="problem">üî¥ –ï—Å—Ç—å –ø—Ä–æ–±–ª–µ–º–∞</option>
                </select>
            </div>
            <div class="question">
                <div class="question-label">–°–ª–µ–¥—É—é—â–µ–µ –¥–µ–π—Å—Ç–≤–∏–µ</div>
                <input type="text" class="question-input" id="area3-action" placeholder="–û–¥–Ω–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ">
            </div>
        </div>
        
        <div class="area">
            <div class="area-name"><span class="area-icon">üöÄ</span> –†–∞–∑–≤–∏—Ç–∏–µ –±–∏–∑–Ω–µ—Å–∞</div>
            <div class="question">
                <div class="question-label">–ß—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ –∑–∞ –Ω–µ–¥–µ–ª—é?</div>
                <textarea class="question-input" id="area4-week"></textarea>
            </div>
            <div class="question">
                <div class="question-label">–°—Ç–∞—Ç—É—Å</div>
                <select class="status-select" id="area4-status">
                    <option value="">–í—ã–±–µ—Ä–∏...</option>
                    <option value="ok">‚úÖ –í—Å—ë –≤ –ø–æ—Ä—è–¥–∫–µ</option>
                    <option value="attention">‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è</option>
                    <option value="problem">üî¥ –ï—Å—Ç—å –ø—Ä–æ–±–ª–µ–º–∞</option>
                </select>
            </div>
            <div class="question">
                <div class="question-label">–°–ª–µ–¥—É—é—â–µ–µ –¥–µ–π—Å—Ç–≤–∏–µ</div>
                <input type="text" class="question-input" id="area4-action" placeholder="–û–¥–Ω–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ">
            </div>
        </div>
        
        <div class="area">
            <div class="area-name"><span class="area-icon">üé¨</span> –ö–æ–Ω—Ç–µ–Ω—Ç –∏ –æ–±—É—á–µ–Ω–∏–µ</div>
            <div class="question">
                <div class="question-label">–ß—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ –∑–∞ –Ω–µ–¥–µ–ª—é?</div>
                <textarea class="question-input" id="area5-week"></textarea>
            </div>
            <div class="question">
                <div class="question-label">–°—Ç–∞—Ç—É—Å</div>
                <select class="status-select" id="area5-status">
                    <option value="">–í—ã–±–µ—Ä–∏...</option>
                    <option value="ok">‚úÖ –í—Å—ë –≤ –ø–æ—Ä—è–¥–∫–µ</option>
                    <option value="attention">‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è</option>
                    <option value="problem">üî¥ –ï—Å—Ç—å –ø—Ä–æ–±–ª–µ–º–∞</option>
                </select>
            </div>
            <div class="question">
                <div class="question-label">–°–ª–µ–¥—É—é—â–µ–µ –¥–µ–π—Å—Ç–≤–∏–µ</div>
                <input type="text" class="question-input" id="area5-action" placeholder="–û–¥–Ω–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ">
            </div>
        </div>
        
        <div class="area">
            <div class="area-name"><span class="area-icon">üë•</span> –°–æ—Ü–∏–∞–ª—å–Ω–∞—è –∂–∏–∑–Ω—å</div>
            <div class="question">
                <div class="question-label">–ß—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ –∑–∞ –Ω–µ–¥–µ–ª—é?</div>
                <textarea class="question-input" id="area6-week"></textarea>
            </div>
            <div class="question">
                <div class="question-label">–°—Ç–∞—Ç—É—Å</div>
                <select class="status-select" id="area6-status">
                    <option value="">–í—ã–±–µ—Ä–∏...</option>
                    <option value="ok">‚úÖ –í—Å—ë –≤ –ø–æ—Ä—è–¥–∫–µ</option>
                    <option value="attention">‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è</option>
                    <option value="problem">üî¥ –ï—Å—Ç—å –ø—Ä–æ–±–ª–µ–º–∞</option>
                </select>
            </div>
            <div class="question">
                <div class="question-label">–°–ª–µ–¥—É—é—â–µ–µ –¥–µ–π—Å—Ç–≤–∏–µ</div>
                <input type="text" class="question-input" id="area6-action" placeholder="–û–¥–Ω–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ">
            </div>
        </div>
        
        <div class="area">
            <div class="area-name"><span class="area-icon">üí∞</span> –§–∏–Ω–∞–Ω—Å—ã</div>
            <div class="question">
                <div class="question-label">–ß—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ –∑–∞ –Ω–µ–¥–µ–ª—é?</div>
                <textarea class="question-input" id="area7-week"></textarea>
            </div>
            <div class="question">
                <div class="question-label">–°—Ç–∞—Ç—É—Å</div>
                <select class="status-select" id="area7-status">
                    <option value="">–í—ã–±–µ—Ä–∏...</option>
                    <option value="ok">‚úÖ –í—Å—ë –≤ –ø–æ—Ä—è–¥–∫–µ</option>
                    <option value="attention">‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è</option>
                    <option value="problem">üî¥ –ï—Å—Ç—å –ø—Ä–æ–±–ª–µ–º–∞</option>
                </select>
            </div>
            <div class="question">
                <div class="question-label">–°–ª–µ–¥—É—é—â–µ–µ –¥–µ–π—Å—Ç–≤–∏–µ</div>
                <input type="text" class="question-input" id="area7-action" placeholder="–û–¥–Ω–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ">
            </div>
        </div>
    </div>
    
    <div class="section">
        <div class="section-header">
            üìÖ –ö–∞–ª–µ–Ω–¥–∞—Ä—å –Ω–∞ –Ω–µ–¥–µ–ª—é <span class="time">10 –º–∏–Ω</span>
        </div>
        <div class="calendar-check">
            <div class="check-item">
                <input type="checkbox" id="check1">
                <label for="check1">–î–µ–π—Å—Ç–≤–∏—è –∏–∑ –æ–±–ª–∞—Å—Ç–µ–π —Ä–∞—Å—Å—Ç–∞–≤–ª–µ–Ω—ã –ø–æ –¥–Ω—è–º</label>
            </div>
            <div class="check-item">
                <input type="checkbox" id="check2">
                <label for="check2">–°–ª–æ—Ç –Ω–∞ –∑–¥–æ—Ä–æ–≤—å–µ –∑–∞—â–∏—â—ë–Ω</label>
            </div>
            <div class="check-item">
                <input type="checkbox" id="check3">
                <label for="check3">–°–ª–æ—Ç –Ω–∞ —Å–µ–º—å—é –∑–∞—â–∏—â—ë–Ω</label>
            </div>
            <div class="check-item">
                <input type="checkbox" id="check4">
                <label for="check4">–°–ª–æ—Ç –Ω–∞ —Å–æ—Ü–∏–∞–ª—å–Ω–æ–µ –∑–∞—â–∏—â—ë–Ω</label>
            </div>
            <div class="check-item">
                <input type="checkbox" id="check5">
                <label for="check5">–í—Ä–µ–º—è –Ω–∞ —Ä–∞–∑–≤–∏—Ç–∏–µ –±–∏–∑–Ω–µ—Å–∞ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ</label>
            </div>
        </div>
    </div>
    
    <div class="section">
        <div class="section-header">
            üí≥ –§–∏–Ω–∞–Ω—Å—ã <span class="time">5 –º–∏–Ω</span>
        </div>
        <div class="calendar-check">
            <div class="check-item">
                <input type="checkbox" id="financeCheck">
                <label for="financeCheck">–¢–∞–±–ª–∏—Ü–∞ cashflow –æ–±–Ω–æ–≤–ª–µ–Ω–∞</label>
            </div>
        </div>
        <textarea class="finance-note" id="financeNote" placeholder="–ó–∞–º–µ—Ç–∫–∏ –ø–æ —Ñ–∏–Ω–∞–Ω—Å–∞–º (–µ—Å–ª–∏ –µ—Å—Ç—å)..." style="margin-top: 12px;"></textarea>
    </div>
    
    <div class="section actions-summary">
        <div class="section-header">
            ‚úÖ –ò—Ç–æ–≥–æ: –¥–µ–π—Å—Ç–≤–∏—è –Ω–∞ –Ω–µ–¥–µ–ª—é
        </div>
        <div class="summary-list">
            <div class="summary-item">
                <span class="summary-area">üí™ –ó–¥–æ—Ä–æ–≤—å–µ:</span>
                <input type="text" class="summary-action" id="summary1" readonly>
            </div>
            <div class="summary-item">
                <span class="summary-area">üë®‚Äçüë©‚Äçüë¶ –°–µ–º—å—è:</span>
                <input type="text" class="summary-action" id="summary2" readonly>
            </div>
            <div class="summary-item">
                <span class="summary-area">üíº –ü—Ä–æ–µ–∫—Ç—ã:</span>
                <input type="text" class="summary-action" id="summary3" readonly>
            </div>
            <div class="summary-item">
                <span class="summary-area">üöÄ –ë–∏–∑–Ω–µ—Å:</span>
                <input type="text" class="summary-action" id="summary4" readonly>
            </div>
            <div class="summary-item">
                <span class="summary-area">üé¨ –ö–æ–Ω—Ç–µ–Ω—Ç:</span>
                <input type="text" class="summary-action" id="summary5" readonly>
            </div>
            <div class="summary-item">
                <span class="summary-area">üë• –î—Ä—É–∑—å—è:</span>
                <input type="text" class="summary-action" id="summary6" readonly>
            </div>
            <div class="summary-item">
                <span class="summary-area">üí∞ –§–∏–Ω–∞–Ω—Å—ã:</span>
                <input type="text" class="summary-action" id="summary7" readonly>
            </div>
        </div>
    </div>
    
    <button class="btn-save" id="saveBtn" onclick="saveData()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ–±–∑–æ—Ä</button>
    <button class="btn-history" onclick="showHistory()">üìä –ò—Å—Ç–æ—Ä–∏—è –æ–±–∑–æ—Ä–æ–≤</button>
    <button class="btn-clear" onclick="clearData()">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å —Ñ–æ—Ä–º—É</button>
    
    <div class="sync-status" id="syncStatus"></div>
    <div class="saved-message" id="savedMessage">‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ –≤ Google –¢–∞–±–ª–∏—Ü—É</div>
    <div class="error-message" id="errorMessage">‚ùå –û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è</div>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∏—Å—Ç–æ—Ä–∏–∏ -->
    <div class="history-modal" id="historyModal">
        <div class="history-content">
            <div class="history-header">
                <h2>üìä –ò—Å—Ç–æ—Ä–∏—è –æ–±–∑–æ—Ä–æ–≤</h2>
                <button class="history-close" onclick="closeHistory()">‚úï</button>
            </div>
            <div id="historyList">
                <div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
            </div>
        </div>
    </div>
    
    <script>
        // URL —Ç–≤–æ–µ–≥–æ Google Apps Script
        const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbwWCLycrSjLfbT7uNCDPpNOMcywVqKrfPxPcwgflJvI62SvpIrZ7VCmx0B0uc8LSuE6/exec';
        
        const areaNames = ['–ó–¥–æ—Ä–æ–≤—å–µ', '–°–µ–º—å—è', '–ö–ª–∏–µ–Ω—Ç—Å–∫–∏–µ –ø—Ä–æ–µ–∫—Ç—ã', '–†–∞–∑–≤–∏—Ç–∏–µ –±–∏–∑–Ω–µ—Å–∞', '–ö–æ–Ω—Ç–µ–Ω—Ç –∏ –æ–±—É—á–µ–Ω–∏–µ', '–°–æ—Ü–∏–∞–ª—å–Ω–∞—è –∂–∏–∑–Ω—å', '–§–∏–Ω–∞–Ω—Å—ã'];
        const areaIcons = ['üí™', 'üë®‚Äçüë©‚Äçüë¶', 'üíº', 'üöÄ', 'üé¨', 'üë•', 'üí∞'];
        
        // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–µ–∫—É—â—É—é –¥–∞—Ç—É
        document.getElementById('reviewDate').valueAsDate = new Date();
        
        // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–µ–π—Å—Ç–≤–∏–π —Å –∏—Ç–æ–≥–æ–≤—ã–º –±–ª–æ–∫–æ–º
        const actionInputs = ['area1-action', 'area2-action', 'area3-action', 'area4-action', 'area5-action', 'area6-action', 'area7-action'];
        const summaryInputs = ['summary1', 'summary2', 'summary3', 'summary4', 'summary5', 'summary6', 'summary7'];
        
        actionInputs.forEach((id, index) => {
            document.getElementById(id).addEventListener('input', function() {
                document.getElementById(summaryInputs[index]).value = this.value;
            });
        });
        
        // –°–æ–±—Ä–∞—Ç—å –¥–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã
        function collectData() {
            const data = {
                date: document.getElementById('reviewDate').value,
                brainDump: document.getElementById('brainDump').value,
                areas: [],
                checks: {
                    actionsPlanned: document.getElementById('check1').checked,
                    healthSlot: document.getElementById('check2').checked,
                    familySlot: document.getElementById('check3').checked,
                    socialSlot: document.getElementById('check4').checked,
                    businessSlot: document.getElementById('check5').checked,
                    cashflowUpdated: document.getElementById('financeCheck').checked
                },
                financeNote: document.getElementById('financeNote').value,
                timestamp: new Date().toISOString()
            };
            
            for (let i = 1; i <= 7; i++) {
                data.areas.push({
                    name: areaNames[i-1],
                    week: document.getElementById(`area${i}-week`).value,
                    status: document.getElementById(`area${i}-status`).value,
                    action: document.getElementById(`area${i}-action`).value
                });
            }
            
            return data;
        }
        
        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ Google –¢–∞–±–ª–∏—Ü—É
        async function saveData() {
            const btn = document.getElementById('saveBtn');
            const syncStatus = document.getElementById('syncStatus');
            
            btn.disabled = true;
            btn.textContent = '‚è≥ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ...';
            syncStatus.textContent = '';
            syncStatus.className = 'sync-status';
            
            const data = collectData();
            
            try {
                const response = await fetch(SCRIPT_URL, {
                    method: 'POST',
                    mode: 'no-cors',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        action: 'save',
                        data: data
                    })
                });
                
                // no-cors –Ω–µ –¥–∞—ë—Ç –ø—Ä–æ—á–∏—Ç–∞—Ç—å –æ—Ç–≤–µ—Ç, –Ω–æ –∑–∞–ø—Ä–æ—Å —É—Ö–æ–¥–∏—Ç
                const msg = document.getElementById('savedMessage');
                msg.style.display = 'block';
                syncStatus.textContent = '‚úì –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–æ —Å Google –¢–∞–±–ª–∏—Ü–µ–π';
                syncStatus.className = 'sync-status synced';
                setTimeout(() => { msg.style.display = 'none'; }, 3000);
                
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞:', error);
                const errMsg = document.getElementById('errorMessage');
                errMsg.style.display = 'block';
                errMsg.textContent = '‚ùå –û—à–∏–±–∫–∞: ' + error.message;
                syncStatus.textContent = '–û—à–∏–±–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏';
                syncStatus.className = 'sync-status error';
                setTimeout(() => { errMsg.style.display = 'none'; }, 5000);
            }
            
            btn.disabled = false;
            btn.textContent = 'üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ–±–∑–æ—Ä';
        }
        
        // –ü–æ–∫–∞–∑–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é
        async function showHistory() {
            const modal = document.getElementById('historyModal');
            const list = document.getElementById('historyList');
            
            modal.style.display = 'block';
            list.innerHTML = '<div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏...</div>';
            
            try {
                const response = await fetch(SCRIPT_URL + '?action=getAll');
                const result = await response.json();
                
                if (result.reviews && result.reviews.length > 0) {
                    // –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ –¥–∞—Ç–µ (–Ω–æ–≤—ã–µ —Å–≤–µ—Ä—Ö—É)
                    const reviews = result.reviews.sort((a, b) => new Date(b.date) - new Date(a.date));
                    
                    list.innerHTML = reviews.map((review, index) => {
                        const dateStr = new Date(review.date).toLocaleDateString('ru-RU', {
                            weekday: 'long',
                            year: 'numeric',
                            month: 'long',
                            day: 'numeric'
                        });
                        
                        const statuses = review.areas ? review.areas.map((area, i) => {
                            const statusClass = area.status || 'empty';
                            return `<div class="status-dot ${statusClass}" title="${areaNames[i]}">${areaIcons[i]}</div>`;
                        }).join('') : '';
                        
                        return `
                            <div class="history-item" onclick="loadReview(${index})">
                                <div class="history-date">${dateStr}</div>
                                <div class="history-statuses">${statuses}</div>
                            </div>
                        `;
                    }).join('');
                    
                    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –≥–ª–æ–±–∞–ª—å–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏
                    window.reviewsData = reviews;
                    
                } else {
                    list.innerHTML = '<div class="loading">–ü–æ–∫–∞ –Ω–µ—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã—Ö –æ–±–∑–æ—Ä–æ–≤</div>';
                }
                
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏:', error);
                list.innerHTML = '<div class="loading">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏—Å—Ç–æ—Ä–∏–∏</div>';
            }
        }
        
        // –ó–∞–≥—Ä—É–∑–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –æ–±–∑–æ—Ä
        function loadReview(index) {
            if (!window.reviewsData || !window.reviewsData[index]) return;
            
            const data = window.reviewsData[index];
            
            document.getElementById('reviewDate').value = data.date;
            document.getElementById('brainDump').value = data.brainDump || '';
            document.getElementById('financeNote').value = data.financeNote || '';
            
            if (data.checks) {
                document.getElementById('check1').checked = data.checks.actionsPlanned || false;
                document.getElementById('check2').checked = data.checks.healthSlot || false;
                document.getElementById('check3').checked = data.checks.familySlot || false;
                document.getElementById('check4').checked = data.checks.socialSlot || false;
                document.getElementById('check5').checked = data.checks.businessSlot || false;
                document.getElementById('financeCheck').checked = data.checks.cashflowUpdated || false;
            }
            
            if (data.areas) {
                for (let i = 0; i < data.areas.length && i < 7; i++) {
                    const area = data.areas[i];
                    document.getElementById(`area${i+1}-week`).value = area.week || '';
                    document.getElementById(`area${i+1}-status`).value = area.status || '';
                    document.getElementById(`area${i+1}-action`).value = area.action || '';
                    document.getElementById(summaryInputs[i]).value = area.action || '';
                }
            }
            
            closeHistory();
        }
        
        function closeHistory() {
            document.getElementById('historyModal').style.display = 'none';
        }
        
        // –ó–∞–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª–∫—É –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –µ—ë
        document.getElementById('historyModal').addEventListener('click', function(e) {
            if (e.target === this) closeHistory();
        });
        
        function clearForm() {
            document.getElementById('brainDump').value = '';
            document.getElementById('financeCheck').checked = false;
            document.getElementById('financeNote').value = '';
            
            for (let i = 1; i <= 7; i++) {
                document.getElementById(`area${i}-week`).value = '';
                document.getElementById(`area${i}-status`).value = '';
                document.getElementById(`area${i}-action`).value = '';
                document.getElementById(summaryInputs[i-1]).value = '';
            }
            
            for (let i = 1; i <= 5; i++) {
                document.getElementById(`check${i}`).checked = false;
            }
        }
        
        function clearData() {
            if (confirm('–û—á–∏—Å—Ç–∏—Ç—å —Ñ–æ—Ä–º—É? –ù–µ—Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç –ø–æ—Ç–µ—Ä—è–Ω—ã.')) {
                clearForm();
            }
        }
    </script>
</body>
</html>
